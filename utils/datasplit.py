import os
import random

dataRoot="/home/wanghonglie/Yankee/data/malware/malware_images/"
trainDataRoot=os.path.join(dataRoot,"train")
testDataRoot=os.path.join(dataRoot,"test")

for i in range(9):
    subDataRoot=os.path.join(dataRoot,"{}/".format(i))
    files=os.listdir(subDataRoot)
    testFiles=random.sample(files,int(len(files)*0.15))
    subDataRootTrain=os.path.join(trainDataRoot,"{}/".format(i))
    subDataRootTest = os.path.join(testDataRoot, "{}/".format(i))
    if not os.path.exists(subDataRootTrain):
        os.makedirs(subDataRootTrain)
    if not os.path.exists(subDataRootTest):
        os.makedirs(subDataRootTest)

    for file in files:
        if file in testFiles:
            cmd_str="mv {} {}".format(os.path.join(subDataRoot,file),os.path.join(subDataRootTest,file))
        else:
            cmd_str = "mv {} {}".format(os.path.join(subDataRoot, file), os.path.join(subDataRootTrain, file))
        os.system(cmd_str)